<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì˜ˆë°œ(ì†Œê°€ë‚³ìŒ)</title>
    <style>
        body {
            height: 100vh;
            margin: 0;
            overflow: hidden; 
            background-color: white; 
            font-family: 'Malgun Gothic', sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center; 
            align-items: center; 
            position: relative; 
        }

        #yebal-btn {
            padding: 25px 50px;
            font-size: 2em;
            cursor: pointer;
            background-color: white; 
            color: black; 
            border: 3px solid black; 
            border-radius: 15px;
            position: relative; 
            z-index: 15; 
            transition: background-color 0.1s, transform 0.1s;
        }
        #yebal-btn:active {
            transform: translateY(2px);
            box-shadow: none;
        }

        /* ì†Œ ì´ëª¨í‹°ì½˜ ìŠ¤íƒ€ì¼ */
        #cow-source {
            position: absolute; 
            bottom: 10%; 
            left: 15%; 
            font-size: 15em; 
            z-index: 10; 
            pointer-events: none; 
            /* transform: scaleX(-1); // ì¢Œìš° ë°˜ì „ ì œê±°, ê¸°ë³¸ ë°©í–¥ì´ ì˜¤ë¥¸ìª½ì´ë¯€ë¡œ */
        }

        #game-area {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; 
            z-index: 5; 
        }

        .yebal-text {
            position: absolute;
            font-size: 1.5em; 
            font-weight: bold;
            color: #2ecc71; 
            white-space: nowrap; 
            opacity: 1; 
            transition: opacity 2s ease-out, transform 0s linear; 
        }
    </style>
</head>
<body>
    
    <div id="cow-source">ğŸ„</div>
    <button id="yebal-btn">ì˜ˆë°œ!</button>
    <div id="game-area"></div>

    <script>
        const yebalButton = document.getElementById('yebal-btn');
        const cowSource = document.getElementById('cow-source'); 
        const gameArea = document.getElementById('game-area');
        const yebalText = 'ì˜ˆë°œ!';

        const yebals = []; 
        let spawnIntervalId = null; 
        const SPAWN_RATE = 100; 

        // ì˜ˆë°œ ê¸€ìì˜ ì´ˆê¸° ë°œì‚¬ ì†ë„
        const MIN_INITIAL_VX = 15; // ì˜¤ë¥¸ìª½ìœ¼ë¡œ ë” ê°•í•˜ê²Œ ë°œì‚¬
        const MAX_INITIAL_VX = 25;

        const MIN_INITIAL_VY = -2; // ìˆ˜ì§ í¸ì°¨ ìµœì†Œí™”
        const MAX_INITIAL_VY = 2;

        const GRAVITY = 0; // ì¤‘ë ¥ íš¨ê³¼ ì œê±° (ê±°ì˜ ì¼ì§ì„ ìœ¼ë¡œ ë‚ ì•„ê°€ë„ë¡)
        const UPDATE_INTERVAL = 10; 

        let gameLoop = setInterval(updateYebals, UPDATE_INTERVAL);

        /**
         * 'ì˜ˆë°œ' ê¸€ì ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ë°°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤.
         */
        function spawnYebal() {
            const rect = cowSource.getBoundingClientRect();
            
            const newYebal = document.createElement('span');
            newYebal.textContent = yebalText;
            newYebal.classList.add('yebal-text');
            
            // ì´ˆê¸° ìœ„ì¹˜: ì†Œ ì´ëª¨í‹°ì½˜ì˜ ì… ë¶€ë¶„ (ëŒ€ëµì ì¸ ìœ„ì¹˜ ê³„ì‚°)
            // ì†Œ ì´ëª¨í‹°ì½˜ì˜ í¬ê¸°ì™€ ìœ„ì¹˜ë¥¼ ê³ ë ¤í•˜ì—¬ ì¡°ì •
            // ì†Œ ì´ëª¨í‹°ì½˜ì´ ì˜¤ë¥¸ìª½ì„ ë°”ë¼ë³´ëŠ” ê¸°ë³¸ ë°©í–¥ì´ë¯€ë¡œ, left ê¸°ì¤€ìœ¼ë¡œ 75% ì§€ì ì´ ì… ìª½
            const initialX = rect.left + rect.width * 0.75; // ì… ìª½ (ì˜¤ë¥¸ìª½ 3/4 ì§€ì )
            const initialY = rect.top + rect.height * 0.4; // ì†Œ ì–¼êµ´ ë†’ì´ (ì… ê·¼ì²˜)

            newYebal.style.visibility = 'hidden';
            gameArea.appendChild(newYebal);
            const yebalWidth = newYebal.offsetWidth;
            const yebalHeight = newYebal.offsetHeight;
            newYebal.style.visibility = 'visible';

            // ì†ë„ ê³„ì‚°: ì£¼ë¡œ ì˜¤ë¥¸ìª½(ì–‘ìˆ˜ X)ìœ¼ë¡œ ê°•í•˜ê²Œ ë°œì‚¬, ìˆ˜ì§ í¸ì°¨ ìµœì†Œí™”
            const initialVx = Math.random() * (MAX_INITIAL_VX - MIN_INITIAL_VX) + MIN_INITIAL_VX;
            const initialVy = (Math.random() - 0.5) * (MAX_INITIAL_VY - MIN_INITIAL_VY) * 2;
            
            const yebalData = {
                element: newYebal,
                x: initialX - yebalWidth / 2, 
                y: initialY - yebalHeight / 2, 
                vx: initialVx, 
                vy: initialVy,
                width: yebalWidth, 
                height: yebalHeight,
                age: 0, 
                maxAge: 300 
            };

            yebals.push(yebalData);
        }

        /**
         * ëª¨ë“  ì˜ˆë°œ ê¸€ìì˜ ìœ„ì¹˜ë¥¼ ì—…ë°ì´íŠ¸í•˜ê³  ì¤‘ë ¥ íš¨ê³¼ ë° ì‚¬ë¼ì§ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
         */
        function updateYebals() {
            const screenWidth = window.innerWidth;

            for (let i = yebals.length - 1; i >= 0; i--) {
                const t = yebals[i];
                
                t.vy += GRAVITY; // ì¤‘ë ¥ì´ 0ì´ë¯€ë¡œ ì‹¤ì œë¡œëŠ” ì ìš©ë˜ì§€ ì•ŠìŒ

                t.x += t.vx;
                t.y += t.vy;

                if (t.x > screenWidth + t.width) { 
                    t.element.remove();
                    yebals.splice(i, 1);
                    continue; 
                }

                t.age++;
                if (t.age > t.maxAge / 2) { 
                    const opacity = 1 - ((t.age - t.maxAge / 2) / (t.maxAge / 2));
                    t.element.style.opacity = Math.max(0, opacity); 
                }
                
                t.element.style.left = t.x + 'px';
                t.element.style.top = t.y + 'px';
            }
        }

        /* * ë²„íŠ¼ ëˆ„ë¦„ ìƒíƒœ ê°ì§€ ë¡œì§ * */
        
        const startSpawning = () => {
             if (spawnIntervalId === null) {
                spawnYebal();
                spawnIntervalId = setInterval(spawnYebal, SPAWN_RATE);
            }
        };

        const stopSpawning = () => {
            if (spawnIntervalId !== null) {
                clearInterval(spawnIntervalId);
                spawnIntervalId = null;
            }
        };

        yebalButton.addEventListener('mousedown', startSpawning);
        document.addEventListener('mouseup', stopSpawning);
        
        yebalButton.addEventListener('touchstart', (e) => {
            e.preventDefault(); 
            startSpawning();
        });
        document.addEventListener('touchend', stopSpawning);
    </script>
</body>
</html>
